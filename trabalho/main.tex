\documentclass[defesa,oneside]{ppginf}
% ------------------------------------------------------------------------------
\usepackage[english,brazilian]{babel}
\usepackage[utf8]{inputenc}	
\usepackage[T1]{fontenc}
\usepackage{newtxtext,newtxmath}
\usepackage[scaled=0.9]{helvet}		
\usepackage{courier}			
% ------------------------------------------------------------------------------
\usepackage{graphicx}		
\usepackage[labelformat=simple]{subcaption}
\renewcommand\thesubfigure{(\alph{subfigure})}
% ------------------------------------------------------------------------------
\usepackage{listings}
\lstset{language=c}
\lstset{basicstyle=\ttfamily\footnotesize,commentstyle=\textit,stringstyle=\ttfamily}
\lstset{showspaces=false,showtabs=false,showstringspaces=false}
\lstset{numbers=left,stepnumber=1,numberstyle=\tiny}
\lstset{columns=flexible,mathescape=true}
\lstset{frame=single}
\lstset{inputencoding=utf8,extendedchars=true}
\lstset{literate={á}{{\'a}}1  {ã}{{\~a}}1 {à}{{\`a}}1 {â}{{\^a}}1
	{Á}{{\'A}}1  {Ã}{{\~A}}1 {À}{{\`A}}1 {Â}{{\^A}}1
	{é}{{\'e}}1  {ê}{{\^e}}1 {É}{{\'E}}1  {Ê}{{\^E}}1
	{í}{{\'\i}}1 {Í}{{\'I}}1
	{ó}{{\'o}}1  {õ}{{\~o}}1 {ô}{{\^o}}1
	{Ó}{{\'O}}1  {Õ}{{\~O}}1 {Ô}{{\^O}}1
	{ú}{{\'u}}1  {Ú}{{\'U}}1
	{ç}{{\c{c}}}1 {Ç}{{\c{C}}}1 }

\usepackage{algorithm,algorithmic}
\floatname{algorithm}{Algoritmo}
\renewcommand{\algorithmiccomment}[1]{~~~// #1}
% ------------------------------------------------------------------------------
\usepackage{alltt,moreverb}
\usepackage{lipsum}		
\usepackage{currfile}	
\usepackage[final]{pdfpages}
\usepackage{longtable}	
%=====================================================

\begin {document}

\title{Batalha Naval}

\author{Universidade Federal do Paraná}
\field{Ciência da Computação}

\date{2017}
\local{Curitiba PR}
\instit{UFPR}{Universidade Federal do Paraná}

\descr{Documento com os requisitos do trabalho para a disciplina CI067 - Oficina de Computação do Departamento de Informática da Universidade Federal do Paraná. \\ Professora: Silvia Regina Vergilio}

%=====================================================

\frontmatter
\pagestyle{frontmatter}
\titlepage
\tableofcontents

%=====================================================

\mainmatter
\pagestyle{mainmatter}

%=====================================================

\chapter{Introdução}

O bem conhecido jogo da Batalha Naval é um jogo para 2 jogadores, jogado com papel e lápis na sua forma original. A história deste jogo antes da sua comercialização não é fácil de coligir, dadas as múltiplas versões existentes na Web. Ao que parece foi inventado por Clifford Von Wickler nos primeiros anos do século XX (ainda antes da 1$^a$ Guerra Mundial), o qual nunca o patenteou. No entanto, outras versões apresentam o jogo já em uso por militares franceses no mesmo período. O jogo foi comercializado em 1931 pela empresa Starex Novelty Co. sob o nome \textit{Salvo}. Em 1943 a empresa Milton Bradley Company voltou a comercializá-lo ainda como jogo de papel e lápis, e em 1967 como jogo de tabuleiro.

No jogo Batalha Naval, cada jogador dispõe no início a sua \textbf{frota} numa matriz de células com dimensão 10x10. As células livres representam \textbf{água}.

Os jogadores jogam alternadamente, sendo o objectivo de cada jogador adivinhar onde se encontram as embarcações do adversário, i.e., onde se encontram todas as células ocupadas do adversário. No contexto do jogo, isto é referido como afundar as embarcações do adversário. Na versão mais simples, quando chega a sua vez de jogar, o jogador identifica a célula para onde quer disparar fornecendo as respectivas coordenadas (i.e., B7). O adversário, por sua vez, diz-lhe qual foi o resultado do disparo: tiro ou água (caso a célula pedida se encontre ocupada ou desocupada, respectivamente). No caso de tiro, o adversário também indica o tipo de embarcação atingida. Quando a última célula de uma embarcação é atingida, o respectivo jogador avisa tiro, embarcação ao fundo. O jogador que consegue atingir todas as posições ocupadas do adversário em primeiro lugar, ganha o jogo.

No projeto pretende-se implementar um jogo de Batalha Naval em linguagem C. O jogador utiliza o programa para jogar contra outro jogador ou contra a máquina. A máquina apenas escolhe aleatoriamente uma coordenada que ainda não tenha escolhido, tentando adivinhar onde vocẽ colocou a frota do seu jogo. Neste caso, o objetivo do jogador é minimizar o número de jogadas com que adivinha as posições das embarcações. As 10 melhores pontuações (número mínimos de disparos) são disponibilizadas em um Hall da Fama.

%=====================================================

\chapter{Componentes do Jogo}

Os componentes do jogo consistem numa matriz de células e num conjunto de gráficos que representam embarcações a ser dispostos na matriz.

\section{Matriz de células}

A matriz tem dimensão 10x10, em que as linhas são identificadas por letras (A..J) e as colunas por números no intervalo 0..9 (ver matriz abaixo).

\begin{quote}
	\begin{footnotesize}
		\begin{verbatim}
		    0   1   2   3   4   5   6   7   8   9
		A |   |   |   |   |   |   |   |   |   |   |
		B |   |   |   |   |   |   |   |   |   |   |
		C |   |   |   |   |   |   |   |   |   |   |
		D |   |   |   |   |   |   |   |   |   |   |
		E |   |   |   |   |   |   |   |   |   |   |
		F |   |   |   |   |   |   |   |   |   |   |
		G |   |   |   |   |   |   |   |   |   |   |
		H |   |   |   |   |   |   |   |   |   |   |
		I |   |   |   |   |   |   |   |   |   |   |
		J |   |   |   |   |   |   |   |   |   |   |
		\end{verbatim}		
	\end{footnotesize}
\end{quote}

No jogo tradicional, cada jogador utiliza um par de matrizes, uma para dispôr a sua frota e outra em que marca os resultados dos disparos que efectua, assinalando também a posição das embarcações adversários já \textbf{afundadas} e células necessariamente desocupadas em seu redor - torna-se inútil efetuar disparos para estas posições que se sabem desocupadas à partida.

\section{Embarcações}

Embora existam diversas variantes da Batalha Naval, será utilizada como referência uma das versões mais populares, a qual define as embarcações apresentadas na Tabela~\ref{tab:embarcações}. Nessa tabela são apresentados: o tipo de embarcação, a sigla da embarcação, o tamanho de células que ocupará na matriz e a quantidade desse tipo de embarcação que estará presente na matriz.

\begin{table}[!htbp]
	\centering
	\caption{Descrição das embarcações}
	\label{tab:embarcações}
	\begin{tabular}{c|c|c|c}
		\hline
		\textbf{Embarcação} & \textbf{Sigla} & \textbf{Tamanho} & \textbf{Quantidade} \\ \hline
		   Porta-aviões     &       P        &        5         &          1          \\ \hline
		  embarcação de Guerra   &       N        &        4         &          1          \\ \hline
		     Cruzador       &       C        &        3         &          1          \\ \hline
		     Submarino      &       S        &        3         &          1          \\ \hline
		    Destruidor      &       D        &        2         &          1          \\ \hline
	\end{tabular}
\end{table}


Ao serem colocados na matriz, o jogador poderá definir qual a orientação que cada embarcação poderá assumir apenas em múltiplos de 90$^{\circ}$. Assim, serão 4 direções: acima, abaixo, direita ou esquerda. As embarcações podem ser colocadas em qualquer local dentro da matriz (linhas A a J, colunas 0 a 9), desde que não se sobreponham.

\section{Mecânica do Jogo}

Ao iniciar o jogo o programa deverá mostrar as seguintes opções de menu:

\begin{quote}
	\begin{footnotesize}
		\begin{verbatim}
		1) Jogar
		2) Hall da Fama
		3) Sobre o jogo
		4) Sair
		\end{verbatim}		
	\end{footnotesize}
\end{quote}

A opção de menu \textbf{2) Hall da Fama} mostrará um ranking das 10 melhores pontuações realizadas até o momento. O jogo \textbf{não} precisa salvar nenhum ranking em arquivo para carregar a cada nova execução do programa, assim, o ranking permanece apenas para aquela execução do programa e sendo reiniciada a cada nova execução. A opção de menu \textbf{3) Sobre o jogo} conterá informações sobre como jogar o jogo, autor, etc. A opção de menu \textbf{4) Sair} fechará o jogo.

Ao acessar a opção de menu \textbf{1) Jogar} o programa deverá mostrar as seguintes opções de menu: 

\begin{quote}
	\begin{footnotesize}
		\begin{verbatim}
		1.1) PvP
		1.2) PvCOM
		1.3) Voltar
		\end{verbatim}		
	\end{footnotesize}
\end{quote}

Sendo que a opção de menu \textbf{1.1) PvP} iniciará um jogo entre duas pessoas (\emph{players}) e a opção de menu \textbf{1.2) PvCOM} iniciará um jogo contra o computador. A opção de menu \textbf{1.3) Voltar} voltará para as opções de menu anterior (1 ao 4).

Ao iniciar uma batalha naval, opções de menu \textbf{1.1) PvP} ou \textbf{1.2) PvCOM}, cada jogador deverá:

\begin{enumerate}
	\item Informar seu nome. No caso do computador deverá ser estabelecido como \textbf{COM}.
	\item Posicionar todos os seus embarcações. No caso do computador os embarcações deverão ser posicionados aleatoriamente.	
\end{enumerate}

Lembrando que a batalha ocorrerá numa área fixa, como mecionado anteriormente, utilizando uma matrix 10x10.

\section{Jogadas}

Os jogadores jogam um de cada vez. Cada jogada corresponde ao envio de apenas um tiro (disparo).  Não são permitidos disparos repetidos, i.e., atingindo uma célula já antes atingida. Quando o jogador atingir todas as embarcações acaba o jogo.

\section{Resultados}

O programa deve mostrar as seguintes informações de cada jogador:

\begin{enumerate}
	\item Número total de disparos realizados;
	\item Número de disparos na água;
	\item Número de disparos em embarcações, por tipo de embarcação (na ordem inversa apresentada na Tabela~\ref{tab:embarcações}, ou seja, começando pelo Destruidor), e omitindo os tipos para os quais não foi atingido qualquer barco;
	\item Número de embarcações afundadas, por tipo de embarcação (na ordem inversa apresentada na Tabela~\ref{tab:embarcações}, ou seja, começando pelo Destruidor), e omitindo os tipos para os quais não foi afundado qualquer embarcação.
\end{enumerate}

\section{Posicionamento das embarcações}

Quando o jogo começa, o programa deverá mostrar a matriz vazia e solicitar ao jogador para colocar as embarcações. A colocação só pode terminar depois de colocados todas as embarcações da frota. Sendo que, toda embarcação deve estar completamente na matriz, nenhum embarcação pode estar com alguma parte do lado de fora.

Durante a colocação o jogador deve informar para a embarcação que está colocando uma coordenada inicial, por exemplo G 1, e solicitar a direção que deve ser colocado a embarcação. Além disso, o usuário deve confirmar se deseja posicionar a embarcação naquela direção para aquela coordenada. As direções possíveis são:

\begin{itemize}
	\item \textbf{W}: Para Cima
	\item \textbf{S}: Para Baixo
	\item \textbf{D}: Para Direita
	\item \textbf{A}: Para Esquerda
\end{itemize}

Abaixo é mostrado um exemplo:

\begin{quote}
	\begin{footnotesize}
		\begin{verbatim}
		Informe uma coordenada para posicionar o "Porta-aviões": G 1
		Informe a direção que o "Porta-aviões" deve ser posicionado: W
		Deseja confirmar a coordenada "G1" com direção "Para Cima" 
		para a embarcação "Porta-aviões"? Sim
		\end{verbatim}		
	\end{footnotesize}
\end{quote}

E a saída será:

\begin{quote}
	\begin{footnotesize}
		\begin{verbatim}
		    0   1   2   3   4   5   6   7   8   9
		A |   |   |   |   |   |   |   |   |   |   |
		B |   |   |   |   |   |   |   |   |   |   |
		C |   | P |   |   |   |   |   |   |   |   |
		D |   | P |   |   |   |   |   |   |   |   |
		E |   | P |   |   |   |   |   |   |   |   |
		F |   | P |   |   |   |   |   |   |   |   |
		G |   | P |   |   |   |   |   |   |   |   |
		H |   |   |   |   |   |   |   |   |   |   |
		I |   |   |   |   |   |   |   |   |   |   |
		J |   |   |   |   |   |   |   |   |   |   |
		\end{verbatim}		
	\end{footnotesize}
\end{quote}

\subsection{Quem começa?}

Depois de colocados as embarcações para todos os jogadores o programa deve determinar quem é o primeiro a jogar. O jogador 1 deve escolher cara ou coroa, então, o programa irá "lançar" uma moeda. Quem vencer decide se deseja começar ou não.

\subsection{Comportamentos do jogo}

Inicialmente, a matriz a ser mostrada ao jogador deve estar vazia, pode-se utilizar um ponto "." para auxiliar na vizualização. Se um jogador erra um tiro, mostrar na matriz como um "O" o local que errou. Se um jogador acertar um tiro, deve mostrar um "X" no local. 

Quando um jogador atingir uma coordenada que não contenha nenhuma embarcação o programa deve mostrar a mensagem "\textbf{Água!}". Se atingir uma coordenada com uma embarcação, o programa deve mostrar a mensagem "\textbf{Fogo!}" e também deve anunciar "qual" embarcação foi atingido (por exemplo, o porta-aviões).

Se cada célula de uma embarcação levar um tiro, a embarcação será afundada. O programa deve então informar dizendo "\textbf{Afundou meu \_\_\_!}" indicando qual tipo de embarcação foi afundada. Além disso, o programa deve mostrar em cada posição a inicial do que derrubou, por exemplo, N de embarcação de guerra. 

O exemplo abaixo ilustra uma situação em que foi afundado um Porta-aviões, alguns tiros acertaram algumas embarcações e outras atingiram a água:

\begin{quote}
	\begin{footnotesize}
		\begin{verbatim}
		    0   1   2   3   4   5   6   7   8   9
		A | . | . | . | . | . | . | . | . | . | . |
		B | . | . | . | . | . | . | X | X | . | . |
		C | O | P | O | . | . | . | . | . | . | . |
		D | . | P | . | . | . | . | . | . | . | . |
		E | . | P | . | . | . | . | . | . | . | . |
		F | . | P | . | . | . | . | O | . | . | . |
		G | . | P | . | . | . | . | . | X | . | . |
		H | . | . | . | . | O | . | . | . | . | . |
		I | . | . | . | . | . | . | . | . | . | . |
		J | . | . | . | . | . | . | . | . | . | O |
		\end{verbatim}		
	\end{footnotesize}
\end{quote}

Ao final de cada jogo o programa deve informar o vencedor e perguntar se o usuário deseja começar um novo jogo ou voltar ao menu inicial.

%=====================================================

\chapter{Condições de entrega e avaliação}

A seguir são descritas as condições de entrega do trabalho e procedimento de avaliação.

\section{Condições de entrega}

A resolução deste trabalho deve ser entregue até as 23:59h de domingo, 24 de Setembro de 2017 (horário de Brasília).  A resolução deve ser entregue via e-mail para silvia@inf.ufpr.br, contendo no assunto \textbf{[Trabalho-OficinaC]} e o nome do aluno, exemplo, \textbf{[Trabalho-OficinaC] Silvia Regina Vergilio}. O nome do aluno também deve estar no corpo do e-mail tendo em anexo um arquivo zip contendo apenas os arquivos fonte onde se encontra o código C (extensão .c). Deverá ser entregue também um relatório em pdf, utilizando o modelo SBC de publicação de artigos (http://www.sbc.org.br/documentos-da-sbc/category/169-templates-para-artigos-e-capitulos-de-livros), que conterá obrigatoriamente a listagem do código C e um pequeno texto explicando as opções tomadas para a resolução.

A entrega fora do prazo implica a penalização de um ponto por cada dia útil de atraso (i.e., 25 de Setembro -1 ponto, 26 de Setembro -2 pontos, 27 de Setembro -3 pontos, 28 de Setembro -4 pontos e 29 de Setembro -5 pontos) não se aceitando trabalhos após quinta-feira, 29 de Setembro de 2017, até às 23:59h (horário de Brasília).

As datas das defesas dos trabalhos serão anunciadas logo que possível. 

\section{Avaliação}

A avaliação do trabalho terá em conta não só a correcta execução do programa, mas também, e principalmente, a correcta estruturação dos métodos, funções e procedimentos que compõem o programa e ainda a sua legibilidade. Valorizar-se-á mais a simplicidade que a eficiência. Valorizar-se-á também código C correctamente comentado (mas não excessivamente, não vale a pena comentar o óbvio).

A nota deste trabalho será dada apenas após uma discussão, individual, com cada aluno. Nesta discussão o aluno terá de demonstrar um total conhecimento do programa e ser capaz de operar as alterações que forem pedidas. Nessa apresentação serão também feitas perguntas sobre a matéria em geral. A nota final dependerá não só da qualidade do trabalho, mas também, e principalmente, do conhecimento do mesmo programa e da matéria em geral e da capacidade de resolver problemas em C demonstrados nessa discussão.

Quaisquer funcionalidades extra que não tenham sido pedidas no enunciado, tais como menus mais sofisticados, utilização de arquivos, etc., não serão forçosamente avaliadas. 

%=====================================================

\appendix

\chapter{Dicas}

\section{Random}

A função \emph{rand()} da biblioteca \emph{<stdlib.h>} retorna um pseudo-random inteiro entre 0 e RAND\_MAX. Vocẽ pode utilizar \emph{srand(sem seed informado)} para determinar um \textit{seed} (um padrão de números aleatórios). 

É uma prática comum utilizar o operator \% em conjunto com a função \emph{rand()} para pegar uma faixa diferente. Por exemplo:

\begin{lstlisting}
#include <time.h>
#include <stdlib.h>

srand(time(NULL));   // deve ser chamado apenas uma vez
int r = rand() % 10; // retorna um pseudo-random inteiro entre 0 e 9 
\end{lstlisting}

Outro exemplo:

\begin{lstlisting}
#include <stdio.h>
#include <stdlib.h>

int main(){
	int i, n = 5;
	time_t t;
	
	// Inicializa o gerado de número aleatório		
	srand((unsigned) time(&t)); 
	
	/* Mostra 5 números elatórios entre 0 e 49 */
	for( i = 0 ; i < n ; i++ ){
		printf("%d\n", rand() % 50);
	}
	
	return(0);
}
\end{lstlisting}

\end{document}

%=====================================================
